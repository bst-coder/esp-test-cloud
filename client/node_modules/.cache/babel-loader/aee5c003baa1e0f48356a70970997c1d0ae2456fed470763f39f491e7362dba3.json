{"ast":null,"code":"import React from'react';import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const ZoneCard=_ref=>{var _latestData$sensorDat,_latestData$sensorDat2,_latestData$sensorDat3,_latestData$sensorDat4;let{zone,onSendCommand}=_ref;const{zoneId,zoneName,threshold,isActive,latestData}=zone;const getMoistureColor=(moisture,threshold)=>{if(!moisture)return'text-gray-400';if(moisture<threshold)return'text-red-600';if(moisture<threshold+10)return'text-yellow-600';return'text-green-600';};const getTemperatureColor=temp=>{if(!temp)return'text-gray-400';if(temp<15)return'text-blue-600';if(temp>35)return'text-red-600';return'text-green-600';};const formatTimestamp=timestamp=>{if(!timestamp)return'No data';return new Date(timestamp).toLocaleString();};const handleCommand=function(commandType){let parameters=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};onSendCommand({zoneId,commandType,parameters});};return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-md p-6 border border-gray-200\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold text-gray-800\",children:[zoneName,\" (Zone \",zoneId,\")\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:`w-3 h-3 rounded-full ${isActive?'bg-green-500':'bg-gray-400'}`,title:isActive?'Active':'Inactive'}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-500\",children:isActive?'Active':'Inactive'})]})]}),latestData?/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-3 rounded-md\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600\",children:\"Soil Moisture\"}),/*#__PURE__*/_jsxs(\"div\",{className:`text-2xl font-bold ${getMoistureColor(latestData.sensorData.soilMoisture,threshold)}`,children:[(_latestData$sensorDat=latestData.sensorData.soilMoisture)===null||_latestData$sensorDat===void 0?void 0:_latestData$sensorDat.toFixed(1),\"%\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-500\",children:[\"Threshold: \",threshold,\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-3 rounded-md\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600\",children:\"Temperature\"}),/*#__PURE__*/_jsxs(\"div\",{className:`text-2xl font-bold ${getTemperatureColor(latestData.sensorData.temperature)}`,children:[(_latestData$sensorDat2=latestData.sensorData.temperature)===null||_latestData$sensorDat2===void 0?void 0:_latestData$sensorDat2.toFixed(1),\"\\xB0C\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-3 rounded-md\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600\",children:\"Humidity\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-2xl font-bold text-blue-600\",children:[(_latestData$sensorDat3=latestData.sensorData.humidity)===null||_latestData$sensorDat3===void 0?void 0:_latestData$sensorDat3.toFixed(1),\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-3 rounded-md\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600\",children:\"Pressure\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-2xl font-bold text-purple-600\",children:[(_latestData$sensorDat4=latestData.sensorData.pressure)===null||_latestData$sensorDat4===void 0?void 0:_latestData$sensorDat4.toFixed(0),\" hPa\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-blue-50 p-3 rounded-md\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600\",children:\"Irrigation Status\"}),/*#__PURE__*/_jsx(\"div\",{className:`text-lg font-semibold ${latestData.irrigationStatus.isIrrigating?'text-blue-600':'text-gray-600'}`,children:latestData.irrigationStatus.isIrrigating?'ðŸ’§ Irrigating':'ðŸš¿ Stopped'}),latestData.irrigationStatus.isIrrigating&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-500\",children:[\"Duration: \",latestData.irrigationStatus.duration,\"s\",latestData.irrigationStatus.reason&&/*#__PURE__*/_jsxs(\"span\",{children:[\" \\u2022 Reason: \",latestData.irrigationStatus.reason]})]})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleCommand('irrigate',{duration:300,force:true}),className:\"flex-1 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors text-sm\",disabled:!isActive,children:\"\\uD83D\\uDCA7 Irrigate (5min)\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleCommand('stop'),className:\"flex-1 bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700 transition-colors text-sm\",disabled:!isActive,children:\"\\uD83D\\uDED1 Stop\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-500 text-center\",children:[\"Last update: \",formatTimestamp(latestData.timestamp)]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8 text-gray-500\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-4xl mb-2\",children:\"\\uD83D\\uDCCA\"}),/*#__PURE__*/_jsx(\"div\",{children:\"No sensor data available\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm\",children:\"Waiting for ESP32 to sync...\"})]})]});};export default ZoneCard;","map":{"version":3,"names":["React","jsxs","_jsxs","jsx","_jsx","ZoneCard","_ref","_latestData$sensorDat","_latestData$sensorDat2","_latestData$sensorDat3","_latestData$sensorDat4","zone","onSendCommand","zoneId","zoneName","threshold","isActive","latestData","getMoistureColor","moisture","getTemperatureColor","temp","formatTimestamp","timestamp","Date","toLocaleString","handleCommand","commandType","parameters","arguments","length","undefined","className","children","title","sensorData","soilMoisture","toFixed","temperature","humidity","pressure","irrigationStatus","isIrrigating","duration","reason","onClick","force","disabled"],"sources":["/home/bst/AWS/smart-irrigation-system/client/src/components/ZoneCard.js"],"sourcesContent":["import React from 'react';\n\nconst ZoneCard = ({ zone, onSendCommand }) => {\n  const { zoneId, zoneName, threshold, isActive, latestData } = zone;\n  \n  const getMoistureColor = (moisture, threshold) => {\n    if (!moisture) return 'text-gray-400';\n    if (moisture < threshold) return 'text-red-600';\n    if (moisture < threshold + 10) return 'text-yellow-600';\n    return 'text-green-600';\n  };\n\n  const getTemperatureColor = (temp) => {\n    if (!temp) return 'text-gray-400';\n    if (temp < 15) return 'text-blue-600';\n    if (temp > 35) return 'text-red-600';\n    return 'text-green-600';\n  };\n\n  const formatTimestamp = (timestamp) => {\n    if (!timestamp) return 'No data';\n    return new Date(timestamp).toLocaleString();\n  };\n\n  const handleCommand = (commandType, parameters = {}) => {\n    onSendCommand({\n      zoneId,\n      commandType,\n      parameters\n    });\n  };\n\n  return (\n    <div className=\"bg-white rounded-lg shadow-md p-6 border border-gray-200\">\n      <div className=\"flex items-center justify-between mb-4\">\n        <h3 className=\"text-lg font-semibold text-gray-800\">\n          {zoneName} (Zone {zoneId})\n        </h3>\n        <div className=\"flex items-center space-x-2\">\n          <div \n            className={`w-3 h-3 rounded-full ${isActive ? 'bg-green-500' : 'bg-gray-400'}`}\n            title={isActive ? 'Active' : 'Inactive'}\n          ></div>\n          <span className=\"text-sm text-gray-500\">\n            {isActive ? 'Active' : 'Inactive'}\n          </span>\n        </div>\n      </div>\n\n      {latestData ? (\n        <div className=\"space-y-4\">\n          {/* Sensor Data */}\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"bg-gray-50 p-3 rounded-md\">\n              <div className=\"text-sm text-gray-600\">Soil Moisture</div>\n              <div className={`text-2xl font-bold ${getMoistureColor(latestData.sensorData.soilMoisture, threshold)}`}>\n                {latestData.sensorData.soilMoisture?.toFixed(1)}%\n              </div>\n              <div className=\"text-xs text-gray-500\">\n                Threshold: {threshold}%\n              </div>\n            </div>\n\n            <div className=\"bg-gray-50 p-3 rounded-md\">\n              <div className=\"text-sm text-gray-600\">Temperature</div>\n              <div className={`text-2xl font-bold ${getTemperatureColor(latestData.sensorData.temperature)}`}>\n                {latestData.sensorData.temperature?.toFixed(1)}Â°C\n              </div>\n            </div>\n\n            <div className=\"bg-gray-50 p-3 rounded-md\">\n              <div className=\"text-sm text-gray-600\">Humidity</div>\n              <div className=\"text-2xl font-bold text-blue-600\">\n                {latestData.sensorData.humidity?.toFixed(1)}%\n              </div>\n            </div>\n\n            <div className=\"bg-gray-50 p-3 rounded-md\">\n              <div className=\"text-sm text-gray-600\">Pressure</div>\n              <div className=\"text-2xl font-bold text-purple-600\">\n                {latestData.sensorData.pressure?.toFixed(0)} hPa\n              </div>\n            </div>\n          </div>\n\n          {/* Irrigation Status */}\n          <div className=\"bg-blue-50 p-3 rounded-md\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <div className=\"text-sm text-gray-600\">Irrigation Status</div>\n                <div className={`text-lg font-semibold ${\n                  latestData.irrigationStatus.isIrrigating ? 'text-blue-600' : 'text-gray-600'\n                }`}>\n                  {latestData.irrigationStatus.isIrrigating ? 'ðŸ’§ Irrigating' : 'ðŸš¿ Stopped'}\n                </div>\n                {latestData.irrigationStatus.isIrrigating && (\n                  <div className=\"text-sm text-gray-500\">\n                    Duration: {latestData.irrigationStatus.duration}s\n                    {latestData.irrigationStatus.reason && (\n                      <span> â€¢ Reason: {latestData.irrigationStatus.reason}</span>\n                    )}\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n\n          {/* Control Buttons */}\n          <div className=\"flex space-x-2\">\n            <button\n              onClick={() => handleCommand('irrigate', { duration: 300, force: true })}\n              className=\"flex-1 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors text-sm\"\n              disabled={!isActive}\n            >\n              ðŸ’§ Irrigate (5min)\n            </button>\n            \n            <button\n              onClick={() => handleCommand('stop')}\n              className=\"flex-1 bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700 transition-colors text-sm\"\n              disabled={!isActive}\n            >\n              ðŸ›‘ Stop\n            </button>\n          </div>\n\n          {/* Last Update */}\n          <div className=\"text-xs text-gray-500 text-center\">\n            Last update: {formatTimestamp(latestData.timestamp)}\n          </div>\n        </div>\n      ) : (\n        <div className=\"text-center py-8 text-gray-500\">\n          <div className=\"text-4xl mb-2\">ðŸ“Š</div>\n          <div>No sensor data available</div>\n          <div className=\"text-sm\">Waiting for ESP32 to sync...</div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ZoneCard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}